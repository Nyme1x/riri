
  
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>riripants üíó</title>

  <style>
    :root{
      --lav1:#fff0f5;   /* very light pink */
      --lav2:#ffe0ec;   /* soft pink */
      --lav3:#ff69b4;   /* hot pink accent */
      --ink:#8b1a3e;
      --card: rgba(255,255,255,.78);
    }
    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at top, var(--lav1), var(--lav2), #d7c8ff);
      overflow:hidden;
      color: var(--ink);
      position: relative;
      font-size: 16px;
    }

    /* Intro screen */
    .intro-screen{
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #fff0f5, #ffe0ec);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1001;
      opacity: 1;
      transition: opacity 0.8s ease;
    }
    .intro-screen.hidden{
      opacity: 0;
      pointer-events: none;
    }

    .intro-content{
      text-align: center;
      padding: 20px;
    }

    .intro-question{
      font-size: clamp(24px, 6vw, 42px);
      font-weight: 800;
      color: #8b1a3e;
      margin-bottom: 30px;
      animation: pulse-text 1.5s ease-in-out infinite;
    }
    @keyframes pulse-text{
      0%, 100%{ transform: scale(1); }
      50%{ transform: scale(1.05); }
    }

    .intro-input{
      font-size: 18px;
      padding: 14px 20px;
      border: 2px solid #ff69b4;
      border-radius: 50px;
      width: min(280px, 85vw);
      text-align: center;
      background: white;
      color: #8b1a3e;
      font-weight: 600;
      margin-bottom: 16px;
      transition: all 0.3s ease;
    }
    .intro-input:focus{
      outline: none;
      border-color: #ff1493;
      box-shadow: 0 0 15px rgba(255, 20, 147, 0.3);
      transform: scale(1.05);
    }

    .intro-submit{
      padding: 12px 30px;
      font-size: 16px;
      font-weight: 800;
      background: linear-gradient(135deg, #ff1493, #ff69b4);
      color: white;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 4px 15px rgba(255, 20, 147, 0.3);
    }
    .intro-submit:hover{
      transform: scale(1.08);
      box-shadow: 0 6px 20px rgba(255, 20, 147, 0.4);
    }
    .intro-submit:active{
      transform: scale(0.95);
    }

    .intro-error{
      color: #ff1493;
      font-weight: 600;
      margin-top: 12px;
      min-height: 20px;
      font-size: 14px;
      animation: shake 0.5s ease;
    }
    @keyframes shake{
      0%, 100%{ transform: translateX(0); }
      25%{ transform: translateX(-5px); }
      75%{ transform: translateX(5px); }
    }

    /* Heart unwrapping animation */
    .heart-animation{
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 80px;
      z-index: 1002;
      animation: unwrap-heart 2s ease forwards;
      pointer-events: none;
    }
    @keyframes unwrap-heart{
      0%{
        opacity: 1;
        font-size: 80px;
        filter: brightness(1);
      }
      50%{
        opacity: 1;
        font-size: 100px;
        filter: brightness(1.2) drop-shadow(0 0 20px rgba(255, 20, 147, 0.8));
      }
      100%{
        opacity: 0;
        font-size: 120px;
        filter: brightness(1) drop-shadow(0 0 40px rgba(255, 20, 147, 0.5));
      }
    }

    /* Animated floating shapes background */
    .bg-shapes{
      position:fixed; inset:0; pointer-events:none; z-index:-1;
    }
    .shape{
      position:absolute;
      opacity:.08;
      animation: float linear infinite;
    }
    .shape.circle{ border-radius:50%; }
    .shape.square{ border-radius:0; }
    @keyframes float{
      0%{ transform:translateY(100vh) rotate(0deg); }
      100%{ transform:translateY(-100vh) rotate(360deg); }
    }

    .sparkles{
      position:fixed; inset:0; pointer-events:none; opacity:.25;
      background-image:
        radial-gradient(circle at 12% 22%, rgba(255,20,147,.95) 0 7px, transparent 8px),
        radial-gradient(circle at 78% 28%, rgba(255,105,180,.85) 0 6px, transparent 7px),
        radial-gradient(circle at 40% 72%, rgba(255,20,147,.85) 0 6px, transparent 7px),
        radial-gradient(circle at 70% 85%, rgba(255,105,180,.8) 0 5px, transparent 6px);
      filter: blur(.2px);
      animation: floaty 6s ease-in-out infinite alternate;
    }
    @keyframes floaty{ from{ transform:translateY(-10px);} to{ transform:translateY(10px);} }

    /* Mouse-following particles */
    .cursor-particle{
      position:fixed;
      pointer-events:none;
      font-size:20px;
      animation: fade-out 1s ease forwards;
    }
    @keyframes fade-out{
      0%{ opacity:1; transform:translate(0,0) scale(1); }
      100%{ opacity:0; transform:translate(var(--tx,0px),var(--ty,-30px)) scale(0.5); }
    }

    .card{
      width:min(620px, 90vw);
      background: var(--card);
      border: 1px solid rgba(255,20,147,.35);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      padding: clamp(16px, 4vw, 26px) clamp(14px, 3vw, 20px) clamp(14px, 3vw, 18px);
      text-align:center;
      box-shadow: 0 20px 60px rgba(139,26,62,.14);
      position:relative;
      animation: card-fade-in 0.6s ease;
    }
    @keyframes card-fade-in{
      from{ opacity:0; transform:translateY(20px); }
      to{ opacity:1; transform:translateY(0); }
    }

    h1{ 
      margin: 0 0 8px; 
      font-size: clamp(28px, 4vw, 44px);
      min-height: 50px;
      background: linear-gradient(135deg, #ff1493, #ff69b4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    p{ margin: 6px 0 0; font-size: 18px; line-height:1.35; }

    /* Falling crying emoji animation */
    .falling-emoji{
      position: fixed;
      font-size: 48px;
      pointer-events: none;
      animation: fall 3s linear forwards;
      z-index: 999;
    }
    @keyframes fall{
      0%{
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
      }
      100%{
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* Confetti animation */
    .confetti{
      position: fixed;
      pointer-events: none;
      animation: confetti-fall 3s ease-out forwards;
      z-index: 1000;
    }
    @keyframes confetti-fall{
      0%{
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 1;
      }
      100%{
        transform: translateY(100vh) translateX(var(--tx, 0)) rotate(360deg);
        opacity: 0;
      }
    }

    /* Quiz screen */
    .quiz-screen{
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #fff0f5, #ffe0ec);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1001;
      opacity: 1;
      transition: opacity 0.8s ease;
      padding: 20px;
      overflow-y: auto;
    }
    .quiz-screen.hidden{
      opacity: 0;
      pointer-events: none;
    }

    .quiz-container{
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 10px 40px rgba(139,26,62,.2);
      border: 2px solid #ff69b4;
      min-height: auto;
      overflow: visible;
    }

    .quiz-progress{
      font-size: 14px;
      color: #8b1a3e;
      font-weight: 600;
      margin-bottom: 15px;
      opacity: 0.8;
      text-align: center;
    }

    .quiz-question{
      font-size: 18px;
      font-weight: 700;
      color: #8b1a3e;
      margin-bottom: 20px;
      line-height: 1.6;
      min-height: 60px;
      word-wrap: break-word;
      white-space: normal;
      text-align: center;
    }

    .quiz-options{
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }

    .quiz-option{
      padding: 12px 16px;
      border: 2px solid #ff69b4;
      background: white;
      color: #8b1a3e;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 15px;
    }
    .quiz-option:hover{
      background: #fff0f5;
      transform: translateX(5px);
      box-shadow: 0 0 15px rgba(255,20,147,.3);
    }
    .quiz-option.selected{
      background: linear-gradient(135deg, #ff1493, #ff69b4);
      color: white;
      border-color: #ff1493;
    }
    .quiz-option.correct{
      background: #90EE90;
      border-color: #228B22;
      color: #228B22;
    }
    .quiz-option.incorrect{
      background: #FFB6C6;
      border-color: #8b1a3e;
    }

    .quiz-submit{
      width: 100%;
      padding: 12px;
      background: linear-gradient(135deg, #ff1493, #ff69b4);
      color: white;
      border: none;
      border-radius: 50px;
      font-weight: 800;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(255,20,147,.3);
      transition: all 0.3s ease;
    }
    .quiz-submit:hover{
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(255,20,147,.6);
    }
    .quiz-submit:disabled{
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btns{
      margin-top: 18px;
      display:flex;
      gap: 12px;
      justify-content:center;
      flex-wrap:wrap;
    }

    button{
      border:0;
      padding: 12px 18px;
      border-radius: 999px;
      font-weight: 800;
      cursor:pointer;
      font-size: 16px;
      transition: transform .1s ease, box-shadow .2s ease;
    }

    #yes{
      background: linear-gradient(135deg, #ff1493, #ff69b4);
      color:white;
      box-shadow: 0 10px 22px rgba(255,20,147,.25);
    }
    #yes:hover{ 
      transform: translateY(-2px) scale(1.05); 
      box-shadow: 0 0 20px rgba(255,20,147,.6), 0 15px 30px rgba(255,20,147,.35);
    }
    #yes:active{ transform: translateY(0) scale(1); }

    #no{
      background: rgba(255,255,255,.92);
      color:#c71585;
      border: 2px solid rgba(255,20,147,.35);
      position: relative;
      z-index: 2000;
    }
    #no:hover{ 
      transform: scale(0.95);
      box-shadow: 0 0 20px rgba(255,20,147,.5);
    }

    .result{
      margin-top: 16px;
      font-size: 20px;
      font-weight: 900;
      color: #c71585;
      min-height: 28px;
      animation: result-pop 0.4s ease;
    }
    @keyframes result-pop{
      0%{ opacity:0; transform:scale(0.8); }
      100%{ opacity:1; transform:scale(1); }
    }

    .streak{
      margin-top: 12px;
      font-size: 14px;
      opacity:.7;
      min-height:20px;
    }

    /* photo area */
    .photoWrap{
      margin-top: 16px;
      display:grid;
      gap: 10px;
      justify-items:center;
    }
    .photoLabel{
      font-size: 13px;
      opacity: .75;
    }
    .photoFrame{
      width:min(520px, 86vw);
      min-height: 300px;
      border-radius: 18px;
      overflow:hidden;
      border: 2px solid rgba(255,20,147,.35);
      box-shadow: 0 10px 30px rgba(199,21,133,.12);
      background: rgba(255,255,255,.65);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition: all 0.3s ease;
      position:relative;
    }
    .photoFrame:hover{
      border-color: rgba(255,20,147,.6);
      box-shadow: 0 15px 40px rgba(255,20,147,.2);
      transform: scale(1.02);
    }
    .photoFrame img{
      max-width:100%;
      max-height:100%;
      object-fit: contain;
      display:block;
      padding: 12px;
      transition: transform 0.3s ease;
    }
    .photoFrame:hover img{ transform: scale(1.03); }

    /* Modal for zoomed photo */
    .photo-modal{
      display:none;
      position:fixed;
      top:0; left:0; right:0; bottom:0;
      background: rgba(0,0,0,0.7);
      z-index:1000;
      align-items:center;
      justify-content:center;
      backdrop-filter: blur(5px);
      animation: fade-in 0.3s ease;
    }
    .photo-modal.active{ display:flex; }
    .photo-modal-content{
      position:relative;
      max-width:90vw;
      max-height:85vh;
      background:white;
      border-radius:12px;
      padding:20px;
      box-shadow: 0 25px 50px rgba(0,0,0,0.3);
    }
    .photo-modal img{
      max-width:100%;
      max-height:70vh;
      display:block;
    }
    .close-modal{
      position:absolute;
      top:10px;
      right:15px;
      background:none;
      border:none;
      font-size:28px;
      cursor:pointer;
      padding:0;
      color:#666;
      transition:color 0.2s;
    }
    .close-modal:hover{ color:#000; }
    @keyframes fade-in{
      from{ opacity:0; }
      to{ opacity:1; }
    }

    /* confetti-ish hearts */
    .pop{
      position: fixed;
      left: 50%;
      top: 60%;
      transform: translate(-50%,-50%);
      font-size: 24px;
      animation: pop 1.2s ease forwards;
      pointer-events:none;
      font-weight:bold;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    @keyframes pop{
      0%{ opacity:0; transform:translate(-50%,-50%) scale(.6) rotate(0deg); }
      15%{ opacity:1; transform:translate(-50%,-60%) scale(1) rotate(-10deg); }
      85%{ opacity:1; }
      100%{ opacity:0; transform:translate(-50%,-200%) scale(1.2) rotate(20deg); }
    }

    /* Easter egg styles */
    .easter-egg{ display:none; }
    .easter-egg.active{
      display:block;
      position:fixed;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      z-index:2000;
      font-size:60px;
      animation: bounce 0.5s ease;
    }
    @keyframes bounce{
      0%,100%{ transform:translate(-50%,-50%) scale(1); }
      50%{ transform:translate(-50%,-50%) scale(1.3); }
    }

    /* Settings button */
    .settings-btn{
      position:fixed;
      bottom:20px;
      right:20px;
      width:50px;
      height:50px;
      border-radius:50%;
      background: rgba(255,255,255,.9);
      border:2px solid rgba(255,20,147,.35);
      font-size:24px;
      cursor:pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .settings-btn:hover{
      transform:scale(1.1);
      box-shadow: 0 6px 20px rgba(255,20,147,.2);
    }

    .settings-panel{
      position:fixed;
      bottom:80px;
      right:20px;
      background:white;
      border:2px solid rgba(255,20,147,.35);
      border-radius:12px;
      padding:15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      display:none;
      flex-direction:column;
      gap:10px;
      z-index:900;
      min-width:150px;
    }
    .settings-panel.open{ display:flex; }
    .settings-panel label{
      font-size:13px;
      display:flex;
      align-items:center;
      gap:8px;
      cursor:pointer;
    }
    .settings-panel input[type="checkbox"]{ cursor:pointer; }

  </style>
</head>

<body>
  <div class="bg-shapes" id="bgShapes"></div>
  <div class="sparkles" aria-hidden="true"></div>

  <!-- Intro Screen -->
  <div class="intro-screen" id="introScreen">
    <div class="intro-content">
      <div class="intro-question">üí≠ Who's the best teacher in the world?</div>
      <input type="text" class="intro-input" id="introInput" placeholder="Your answer..." />
      <button class="intro-submit" id="introSubmit">Let's go! ‚ú®</button>
      <div class="intro-error" id="introError"></div>
    </div>
  </div>

  <!-- Quiz Screen -->
  <div class="quiz-screen" id="quizScreen">
    <div class="quiz-container">
      <div style="font-size: 28px; font-weight: 800; color: #ff1493; margin-bottom: 25px; text-align: center;">UR GONNA HAVE THE BEST SPEECH üíó</div>
      <div class="quiz-progress" id="quizProgress">Question 1 of 5</div>
      <div class="quiz-question" id="quizQuestion">ARE YOU READY...</div>
      <div class="quiz-options" id="quizOptions"></div>
      <button class="quiz-submit" id="quizSubmit">Next Question</button>
    </div>
  </div>

  <div class="settings-panel" id="settingsPanel">
    <label>
      <input type="checkbox" id="soundToggle" checked />
      Sound Effects
    </label>
    <label>
      <input type="checkbox" id="particlesToggle" checked />
      Particles
    </label>
  </div>

  <button class="settings-btn" id="settingsBtn">‚öôÔ∏è</button>

  <div class="photo-modal" id="photoModal">
    <div class="photo-modal-content">
      <button class="close-modal" id="closeModal">&times;</button>
      <img id="modalPhoto" alt="Zoomed photo" />
    </div>
  </div>

  <main class="card" style="display: none;">
    <div style="font-size:42px; margin-bottom:6px;">üíå</div>
    <h1 id="mainHeading">Will you be my Valentine? üíó</h1>
    <p id="mainMessage">
      Hey <span id="name">Rita</span>, you make my days better in the best way.
      <br/>I'd give you an A+ for stealing my heart... and that's one grade I never give! üòâ
      <br/>Would you be my Valentine this year? üíó
    </p>

    <div class="btns">
      <button id="yes">yaaaaaa! üíó</button>
      <button id="no">Naur üôà</button>
    </div>

    <div class="result" id="result"></div>

    <!-- Photo area -->
    <div class="photoWrap">
      <div class="photoLabel">(üì∏changes when you press "Naur")</div>
      <div class="photoFrame" id="photoFrame">
        <img id="couplePhoto" alt="A photo of us" />
      </div>
    </div>
  </main>

  <script>
    // ===== INTRO SCREEN LOGIC =====
    const introScreen = document.getElementById('introScreen');
    const introInput = document.getElementById('introInput');
    const introSubmit = document.getElementById('introSubmit');
    const introError = document.getElementById('introError');
    const mainCard = document.querySelector('.card');

    function showHeartAnimation() {
      const heart = document.createElement('div');
      heart.className = 'heart-animation';
      heart.textContent = 'üíó';
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 2000);
    }

    function progressToMain() {
      progressToMainFromIntro();
    }

    introSubmit.addEventListener('click', () => {
      const answer = introInput.value.trim().toLowerCase();
      if (answer === 'rita') {
        introError.textContent = '';
        progressToMain();
      } else {
        introError.textContent = 'No silly, try again! üòâ';
        introInput.value = '';
        introInput.focus();
      }
    });

    introInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        introSubmit.click();
      }
    });

    introInput.focus();

    // ===== QUIZ LOGIC =====
    const quizScreen = document.getElementById('quizScreen');
    const quizQuestion = document.getElementById('quizQuestion');
    const quizOptions = document.getElementById('quizOptions');
    const quizProgress = document.getElementById('quizProgress');
    const quizSubmit = document.getElementById('quizSubmit');

    const quizzes = [
      {
        question: "I was recently asked about my favourite kindergarten memory, and realized I didn't have one because by the time I was four years old, hospitals had already become a _____ part of my world.",
        options: ["familiar", "scary", "new", "distant"],
        correct: "familiar"
      },
      {
        question: "As a childhood cancer survivor, I care about what happens when children return to school after _____.",
        options: ["graduation", "serious illness", "summer break", "exams"],
        correct: "serious illness"
      },
      {
        question: "The COVID-19 pandemic highlighted how _____ learning becomes during prolonged absences.",
        options: ["easy", "fragile", "difficult", "important"],
        correct: "fragile"
      },
      {
        question: "Research shows that reintegration is not only an academic challenge, but also a _____ and emotional one.",
        options: ["physical", "mental", "social", "behavioral"],
        correct: "social"
      },
      {
        question: "A critical next step is to listen to _____.",
        options: ["students", "parents", "teachers", "doctors"],
        correct: "teachers"
      }
    ];

    let currentQuizIndex = 0;
    let selectedAnswer = null;
    let quizAnswered = false;
    let quizStarted = false;

    function showQuizQuestion() {
      const quiz = quizzes[currentQuizIndex];
      if (!quiz || !quiz.question) {
        console.error('Quiz error:', quiz, currentQuizIndex);
        quizQuestion.textContent = "I was recently asked about my favourite kindergarten memory, and realized I didn't have one because by the time I was four years old, hospitals had already become a _____ part of my world.";
        return;
      }
      
      quizQuestion.textContent = quiz.question;
      quizProgress.textContent = `Question ${currentQuizIndex + 1} of ${quizzes.length}`;
      quizOptions.innerHTML = '';
      selectedAnswer = null;
      quizAnswered = false;
      quizSubmit.textContent = 'Next Question';
      quizSubmit.disabled = true;

      if (!quiz.options || quiz.options.length === 0) {
        quizOptions.innerHTML = '<div style="color: red;">Error: No options</div>';
        return;
      }

      quiz.options.forEach(option => {
        const btn = document.createElement('div');
        btn.className = 'quiz-option';
        btn.textContent = option;
        btn.addEventListener('click', () => {
          document.querySelectorAll('.quiz-option').forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          selectedAnswer = option;
          quizSubmit.disabled = false;
        });
        quizOptions.appendChild(btn);
      });
    }

    function progressToQuiz() {
      console.log('progressToQuiz called');
      introScreen.classList.add('hidden');
      setTimeout(() => {
        introScreen.style.display = 'none';
        quizScreen.style.display = 'flex';
        quizStarted = false;
        currentQuizIndex = 0;
        quizProgress.textContent = '';
        quizQuestion.textContent = 'Are you ready? üí™';
        quizOptions.innerHTML = '';
        quizSubmit.textContent = 'Let\'s go!';
        quizSubmit.disabled = false;
      }, 800);
    }

    function progressFromQuizToMain() {
      quizScreen.classList.add('hidden');
      setTimeout(() => {
        quizScreen.style.display = 'none';
        mainCard.style.display = 'block';
      }, 800);
    }

    quizSubmit.addEventListener('click', () => {
      if (!quizStarted) {
        // Start the quiz
        quizStarted = true;
        currentQuizIndex = 0;
        showQuizQuestion();
      } else if (quizAnswered) {
        // Move to next question
        currentQuizIndex++;
        if (currentQuizIndex < quizzes.length) {
          showQuizQuestion();
        } else {
          // All questions done, go to main
          progressFromQuizToMain();
        }
      } else {
        // Check answer
        const quiz = quizzes[currentQuizIndex];
        quizAnswered = true;
        if (selectedAnswer === quiz.correct) {
          document.querySelectorAll('.quiz-option').forEach(btn => {
            btn.style.pointerEvents = 'none';
            if (btn.textContent === quiz.correct) {
              btn.classList.add('correct');
            }
          });
          quizSubmit.textContent = '‚úì Correct! Next';
        } else {
          document.querySelectorAll('.quiz-option').forEach(btn => {
            btn.style.pointerEvents = 'none';
            if (btn.textContent === selectedAnswer) {
              btn.classList.add('incorrect');
            } else if (btn.textContent === quiz.correct) {
              btn.classList.add('correct');
            }
          });
          quizSubmit.textContent = 'Next (Wrong)';
        }
      }
    });

    // Update intro to go to quiz instead of main
    function progressToMainFromIntro() {
      showHeartAnimation();
      setTimeout(() => {
        progressToQuiz();
      }, 300);
    }

    // ===== SETTINGS =====
    const settingsBtn = document.getElementById('settingsBtn');
    const settingsPanel = document.getElementById('settingsPanel');
    let soundEnabled = localStorage.getItem('soundEnabled') !== 'false';
    let particlesEnabled = localStorage.getItem('particlesEnabled') !== 'false';
    
    document.getElementById('soundToggle').checked = soundEnabled;
    document.getElementById('particlesToggle').checked = particlesEnabled;

    settingsBtn.addEventListener('click', () => {
      settingsPanel.classList.toggle('open');
    });

    document.getElementById('soundToggle').addEventListener('change', (e) => {
      soundEnabled = e.target.checked;
      localStorage.setItem('soundEnabled', soundEnabled);
    });

    document.getElementById('particlesToggle').addEventListener('change', (e) => {
      particlesEnabled = e.target.checked;
      localStorage.setItem('particlesEnabled', particlesEnabled);
    });

    // ===== SOUND EFFECTS =====
    function playSound(type) {
      if (!soundEnabled) return;
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const now = audioContext.currentTime;
      
      if (type === 'click') {
        const osc = audioContext.createOscillator();
        const gain = audioContext.createGain();
        osc.connect(gain);
        gain.connect(audioContext.destination);
        osc.frequency.setValueAtTime(800, now);
        osc.frequency.exponentialRampToValueAtTime(600, now + 0.1);
        gain.gain.setValueAtTime(0.1, now);
        gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
        osc.start(now);
        osc.stop(now + 0.1);
      } else if (type === 'success') {
        const notes = [800, 1000, 1200];
        notes.forEach((freq, i) => {
          const osc = audioContext.createOscillator();
          const gain = audioContext.createGain();
          osc.connect(gain);
          gain.connect(audioContext.destination);
          osc.frequency.value = freq;
          gain.gain.setValueAtTime(0.1, now + i*0.05);
          gain.gain.exponentialRampToValueAtTime(0.01, now + i*0.05 + 0.15);
          osc.start(now + i*0.05);
          osc.stop(now + i*0.05 + 0.15);
        });
      }
    }

    // ===== CONFETTI BURST =====
    function createConfettiBurst() {
      const confettiItems = ['üíó', 'üíñ', '‚ú®', 'üíù', 'üéÄ', 'üíï'];
      for (let i = 0; i < 30; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.textContent = confettiItems[Math.floor(Math.random() * confettiItems.length)];
          const randomX = Math.random() * window.innerWidth;
          confetti.style.left = randomX + 'px';
          confetti.style.top = '-50px';
          confetti.style.fontSize = Math.random() * 20 + 30 + 'px';
          confetti.style.setProperty('--tx', (Math.random() - 0.5) * 200 + 'px');
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 3000);
        }, i * 50);
      }
    }

    // ===== BACKGROUND MUSIC =====
    function playBackgroundMusic() {
      // Using Web Audio API to create the melody of "All I Need is Me and My Girlfriend"
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      
      // Simple melody using oscillators
      function playNote(freq, startTime, duration) {
        const osc = audioContext.createOscillator();
        const gain = audioContext.createGain();
        osc.connect(gain);
        gain.connect(audioContext.destination);
        osc.frequency.value = freq;
        osc.type = 'sine';
        gain.gain.setValueAtTime(0.05, startTime);
        gain.gain.exponentialRampToValueAtTime(0.01, startTime + duration);
        osc.start(startTime);
        osc.stop(startTime + duration);
      }

      const now = audioContext.currentTime;
      const tempo = 0.4;
      
      // Play a sweet melody
      const notes = [
        {freq: 523.25, time: 0},           // C
        {freq: 523.25, time: tempo},       
        {freq: 587.33, time: tempo * 2},   // D
        {freq: 659.25, time: tempo * 3},   // E
        {freq: 659.25, time: tempo * 4},   
        {freq: 587.33, time: tempo * 5},   
        {freq: 523.25, time: tempo * 6},   
        {freq: 523.25, time: tempo * 7},   
      ];

      notes.forEach(note => {
        playNote(note.freq, now + note.time, tempo * 0.9);
      });
    }
    function typewriterEffect(element, text, speed = 30) {
      return new Promise(resolve => {
        let i = 0;
        element.textContent = '';
        function type() {
          if (i < text.length) {
            element.textContent += text.charAt(i);
            i++;
            setTimeout(type, speed);
          } else {
            resolve();
          }
        }
        type();
      });
    }

    // ===== PERSONALIZATION =====
    const herName = "Rita";
    document.getElementById("name").textContent = herName;

    // ===== CHECK IF ALREADY ACCEPTED =====
    // Clear localStorage for fresh start (comment this out after first use)
    localStorage.removeItem('valentineAccepted');
    localStorage.removeItem('noClickStreak');
    
    const alreadyAccepted = localStorage.getItem('valentineAccepted') === 'true';
    let noClickStreak = parseInt(localStorage.getItem('noClickStreak') || '0');

    if (alreadyAccepted) {
      document.getElementById('result').textContent = "üíú You already said YES! Can't wait to see you! üíú";
      document.getElementById('yes').disabled = true;
      document.getElementById('no').disabled = true;
    }

    // ===== PHOTOS =====
    const photos = [
      "car.jpg",
      "party.jpg",
      "wonderland.jpg",
      "halloween.jpg",
      "birthday.jpg"
    ];

    let photoIndex = 0;
    const photoEl = document.getElementById("couplePhoto");

    function showPhoto(i) {
      photoEl.src = photos[i];
    }

    showPhoto(photoIndex);

    // Photo zoom modal
    const photoFrame = document.getElementById('photoFrame');
    const photoModal = document.getElementById('photoModal');
    const modalPhoto = document.getElementById('modalPhoto');
    const closeModal = document.getElementById('closeModal');

    photoFrame.addEventListener('click', () => {
      modalPhoto.src = photos[photoIndex];
      photoModal.classList.add('active');
    });

    closeModal.addEventListener('click', () => {
      photoModal.classList.remove('active');
    });

    photoModal.addEventListener('click', (e) => {
      if (e.target === photoModal) {
        photoModal.classList.remove('active');
      }
    });

    // ===== MOUSE FOLLOWERS =====
    document.addEventListener('mousemove', (e) => {
      if (!particlesEnabled) return;
      
      if (Math.random() > 0.7) {
        const particle = document.createElement('div');
        particle.className = 'cursor-particle';
        particle.textContent = ['ÔøΩ', 'üíñ', '‚ú®'][Math.floor(Math.random() * 3)];
        particle.style.left = e.clientX + 'px';
        particle.style.top = e.clientY + 'px';
        particle.style.setProperty('--tx', (Math.random() - 0.5) * 80 + 'px');
        particle.style.setProperty('--ty', (Math.random() - 0.5) * 80 + 'px');
        document.body.appendChild(particle);
        setTimeout(() => particle.remove(), 1000);
      }
    });

    // ===== BUTTONS =====
    const result = document.getElementById("result");
    const noBtn = document.getElementById("no");
    const yesBtn = document.getElementById("yes");

    yesBtn.addEventListener("click", async () => {
      playSound('success');
      playBackgroundMusic();
      createConfettiBurst();
      localStorage.setItem('valentineAccepted', 'true');
      localStorage.setItem('noClickStreak', '0');
      
      result.textContent = "I can't wait üíó";
      
      yesBtn.disabled = true;
      noBtn.disabled = true;
    });

    function cyclePhoto() {
      photoIndex = (photoIndex + 1) % photos.length;
      showPhoto(photoIndex);
    }

    let isAnimating = false;

    function dodge() {
      if (alreadyAccepted) return;
      
      playSound('click');
      cyclePhoto();

      if (!isAnimating) {
        isAnimating = true;

        // Create falling crying emojis
        for (let i = 0; i < 12; i++) {
          setTimeout(() => {
            const emoji = document.createElement('div');
            emoji.className = 'falling-emoji';
            emoji.textContent = 'üò≠';
            const randomX = Math.random() * window.innerWidth;
            emoji.style.left = randomX + 'px';
            emoji.style.top = '-100px';
            document.body.appendChild(emoji);
            setTimeout(() => emoji.remove(), 3000);
          }, i * 100);
        }

        setTimeout(() => {
          isAnimating = false;
        }, 1200);
      }

      result.textContent = "NOOO??üò≠üíó";
    }

    noBtn.addEventListener("click", dodge);

    // ===== ANIMATED BACKGROUND SHAPES =====
    function createBackgroundShapes() {
      const bgShapes = document.getElementById('bgShapes');
      const colors = ['#7a5cff', '#b39bff', '#cbb7ff', '#d7c8ff'];
      
      for (let i = 0; i < 8; i++) {
        const shape = document.createElement('div');
        shape.className = `shape ${Math.random() > 0.5 ? 'circle' : 'square'}`;
        shape.style.width = (40 + Math.random() * 120) + 'px';
        shape.style.height = shape.style.width;
        shape.style.left = Math.random() * 100 + '%';
        shape.style.top = '-100px';
        shape.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        shape.style.animationDuration = (8 + Math.random() * 15) + 's';
        shape.style.animationDelay = Math.random() * 5 + 's';
        bgShapes.appendChild(shape);
      }
    }
    createBackgroundShapes();
  </script>
</body>
</html>
